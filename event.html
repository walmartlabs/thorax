
<html>
  <head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thorax: Event Plugin</title>
    
    <link rel="stylesheet" type="text/css" href="screen.css">
    
    

    

    <!-- Typekit -->
    
      <script type="text/javascript">
        (function() {
          var config = {
            kitId: 'hjp0pft',
            scriptTimeout: 3000
          };
          var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/( |^)wf-loading( |$)/g,"");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script");tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(a&&a!="complete"&&a!="loaded")return;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
        })();
      </script>
    
  </head>
  <body><div id="container">
  <div id="nav">
    
      <div id="header">
        <a href="index.html" id="logo">Thorax<span>Event Plugin</span></a>
      </div>
    
    <ul id="sections">
      
        <li>
          <a href="#class-methods">Class Methods</a>
          
            <ul>
              
                <li>
                  <a href="#class-methods/on-klass-on-eventname-callback">on </a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#instance-methods">Instance Methods</a>
          
            <ul>
              
                <li>
                  <a href="#instance-methods/freeze-view-freeze-options">freeze </a>
                </li>
              
                <li>
                  <a href="#instance-methods/_addevent-view-_addevent-eventparams">_addEvent </a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#event-enhancements">Event Enhancements</a>
          
            <ul>
              
                <li>
                  <a href="#event-enhancements/events-object-view-events">Events Object </a>
                </li>
              
                <li>
                  <a href="#event-enhancements/auto-unbind-view-on-targetobj-eventname-callback-context">Auto Unbind </a>
                </li>
              
                <li>
                  <a href="#event-enhancements/dom-events-view-on-eventnameandselector-callback-context">DOM Events </a>
                </li>
              
            </ul>
          
        </li>
      
        <li>
          <a href="#events">Events</a>
          
            <ul>
              
                <li>
                  <a href="#events/freeze-freeze">freeze </a>
                </li>
              
            </ul>
          
        </li>
      
    </ul><div class="header"><a href="#">Plugins</a></div><ul class="sections"><li><a href="collection.html">Collection</a></li><li><a href="event.html">Event</a></li><li><a href="form.html">Form</a></li><li><a href="helpers.html">Helpers</a></li><li><a href="loading.html">Loading</a></li><li><a href="mobile.html">Mobile</a></li><li><a href="model.html">Model</a></li><li><a href="view-controller.html">ViewController</a></li></ul>
    
    
  </div>
  <div id="content">
    
    <h1>Thorax Event Plugin</h1>
<p>Adds inheritable class events for all Backbone and Thorax classes and significant enhancements to the Thorax.View event handling. 

</p>
<h2 id="class-methods">Class Methods</h2>
<h3 id="class-methods/on-klass-on-eventname-callback" class="signature">on <em>klass.on(eventName, callback)</em></h3>
<p>Allows all Backbone and Thorax classes to observe events on all instances of the class. Subclasses inherit their parents' event handlers. Optionally an object may be passed containing <code>eventName</code> <code>callback</code> pairs.

</p>
<pre><code>Backbone.Model.on(<span class="string">'change'</span>, <span class="keyword">function</span>() {
  <span class="comment">//"this" will refer to the model</span>
  <span class="comment">//that triggered the event</span>
});

Thorax.View.on({
  <span class="string">'click a'</span>: <span class="keyword">function</span>(event) {

  }
});</code></pre>
<h2 id="instance-methods">Instance Methods</h2>
<p>Applies only to Thorax.View and subclasses.

</p>
<h3 id="instance-methods/freeze-view-freeze-options" class="signature">freeze <em>view.freeze([options])</em></h3>
<p><code>off</code> all view event handlers, DOM event handlers and call <code>freeze</code> on any child views. Pass <code>dom: false</code> to only <code>off</code> view events, or <code>children: false</code> to prevent <code>freeze</code> from being called on child views. Triggers the <code>freeze</code> event.

</p>
<h3 id="instance-methods/_addevent-view-_addevent-eventparams" class="signature">_addEvent <em>view._addEvent(eventParams)</em></h3>
<p>This method is never called directly, but can be specified to override the behavior of the <code>events</code> hash or any event arguments passed to <code>on</code>. For each event declared in either manner <code>_addEvent</code> will be called with a hash containing:

</p>
<ul>
<li>type "view" || "DOM"</li>
<li>name (DOM events will begin with ".delegateEvents")</li>
<li>originalName</li>
<li>selector (DOM events only)</li>
<li>handler</li>
</ul>
<h2 id="event-enhancements">Event Enhancements</h2>
<p>Applies only to Thorax.View and subclasses.

</p>
<h3 id="event-enhancements/events-object-view-events" class="signature">Events Object <em>view.events</em></h3>
<p>The <code>Backbone events</code> object now accepts view events in addition to DOM events. In addition any object that can be set as the events object may also be passed to the <code>on</code> method.

</p>
<pre><code><span class="tag">new</span> <span class="tag">Thorax</span><span class="class">.View</span>(<span class="rules">{
  <span class="rule"><span class="attribute">events</span>:<span class="value"> {
    <span class="string">'click a'</span>: <span class="function">function()</span> {</span>}</span></span>,
    <span class="tag">rendered</span>: <span class="tag">function</span>() <span class="rules">{<span class="rule">}</span></span>
  }
})</code></pre>
<h3 id="event-enhancements/auto-unbind-view-on-targetobj-eventname-callback-context" class="signature">Auto Unbind <em>view.on(targetObj, eventName, callback [,context])</em></h3>
<p>Listen for an event on the <code>targetObj</code> until <code>freeze</code> or <code>destroy</code> are called on the view, at which point the listener will be auto unbound (auto <code>off</code>ed if you will). Most model and collection behaviors in Thorax are implemented in this manner.

</p>
<pre><code><span class="reserved">var</span> view = <span class="keyword">new</span> Thorax.View();
<span class="reserved">var</span> otherView = <span class="keyword">new</span> Thorax.View();
view.<span class="literal">on</span>(otherView, <span class="string">'rendered'</span>, <span class="reserved">function</span>(){});
view.destroy();
//the observer registered above will <span class="keyword">not</span> be triggered
otherView.render();</code></pre>
<h3 id="event-enhancements/dom-events-view-on-eventnameandselector-callback-context" class="signature">DOM Events <em>view.on(eventNameAndSelector, callback [,context])</em></h3>
<p>The <code>on</code> method will now accept event strings in the same format as the events hash, for instance <code>click a</code>. Events separated by a space will still be treated as registering multiple events so long as the event name does not start with a DOM event name (<code>click</code>, <code>change</code>, <code>mousedown</code> etc).

</p>
<p>DOM events observed in this way will only operate on the view itself. If the view embeds other views with the <code>view</code> helper that would match the event name and selector, they will be ignored. For instance declaring:

</p>
<pre><code>view.<span class="keyword">on</span>(<span class="string">'click a'</span>, <span class="keyword">function</span>(event) <span class="comment">{}</span>)</code></pre>
<p>Will only listen for clicks on <code>a</code> elements within the view. If the view has children that has <code>a</code> elements, this handler will not observe clicks on them.

</p>
<p>DOM events may be prefixed with the special keyword <code>nested</code> which will apply the event to all elements in child views:

</p>
<pre><code>view.<span class="keyword">on</span>(<span class="string">'nested click a'</span>, <span class="keyword">function</span>() <span class="comment">{}</span>)</code></pre>
<p>Since the context of DOM event handlers in Thorax will always be the view, the second argument to the handler will be the <code>Element</code> object that would have been set as <code>this</code> had the handler been registered with jQuery / Zepto:

</p>
<pre><code>$(<span class="string">'a'</span>).<span class="literal">on</span>(<span class="string">'click'</span>, <span class="reserved">function</span>() {});
view.<span class="literal">on</span>(<span class="string">'click a'</span>, <span class="reserved">function</span>(event, element) {
  // element === what <span class="string">"this"</span> would be <span class="keyword">in</span> the
  // first handler
});</code></pre>
<h2 id="events">Events</h2>
<h3 id="events/freeze-freeze" class="signature">freeze <em>freeze</em></h3>
<p>Triggered when the <code>freeze</code> method is called (either directly or via <code>destroy</code>). No arguments are passed.</p>

  <p>Copyright 2012 <a href="http://walmartlabs.com">@WalmartLabs</a></p></div>
</div><a href="https://github.com/walmartlabs/thorax"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a></body>
</html>